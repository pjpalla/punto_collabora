!function(g){"use strict";function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Function}function a(t){return!o(t)&&t instanceof Object}function r(t,e){var n;for(n in e)a(e[n])||i(e[n])?(a(e[n])&&!a(t[n])&&(t[n]={}),i(e[n])&&!i(t[n])&&(t[n]=[]),r(t[n],e[n])):e[n]!==undefined&&(t[n]=e[n])}function I(t,e){var n={};return r(n,t),r(n,e),n}function s(t){var e,n,a,i,r,o,s,c,l,u,d;return"[object Date]"===(u=Object.prototype.toString.call(t))?t:"[object String]"===u&&(a=t.match($))?(d=parseInt(a[1],10),o=parseInt(a[3],10)-1,e=parseInt(a[5],10),n=parseInt(a[7],10),r=a[9]?parseInt(a[9],10):0,l=a[11]?parseInt(a[11],10):0,i=a[12]?1e3*parseFloat(U+a[12].slice(1)):0,c=Date.UTC(d,o,e,n,r,l,i),a[13]&&a[14]&&(s=60*a[15],a[17]&&(s+=parseInt(a[17],10)),c-=60*(s*="-"===a[14]?-1:1)*1e3),new Date(c)):void 0}function d(t){var e,n,a;for(e=0;e<t.length;e++)for(a=t[e].data,n=0;n<a.length;n++)if(a[n][1]<0)return!0;return!1}function x(i,r,o,s,c,l,u){return function(t,e,n){var a=I({},i);return a=I(a,n||{}),e.hideLegend&&r(a),"min"in e?o(a,e.min):d(t)||o(a,0),e.max&&s(a,e.max),"stacked"in e&&c(a,e.stacked),e.colors&&(a.colors=e.colors),e.xtitle&&l(a,e.xtitle),e.ytitle&&u(a,e.ytitle),a=I(a,e.library||{})}}function n(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function c(t,e){n(t,"Error Loading Chart: "+e),t.style.color="#ff0000"}function t(i,t,e){(g.jQuery||g.Zepto||g.$).ajax({dataType:"json",url:t,success:e,error:function(t,e,n){var a="string"==typeof n?n:n.message;c(i,a)}})}function l(t,e){try{e(t)}catch(n){throw c(t.element,n.message),n}}function u(e,n){"string"==typeof e.dataSource?t(e.element,e.dataSource,function(t){e.data=t,l(e,n)}):(e.data=e.dataSource,l(e,n))}function v(t){return""+t}function F(t){return parseFloat(t)}function h(t){var e,n,a,i;if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{if(e=t.match(X))return n=parseInt(e[1],10),a=parseInt(e[3],10)-1,i=parseInt(e[5],10),new Date(n,a,i);t=s(t.replace(/ /,"T").replace(" ","").replace("UTC","Z"))||new Date(t)}return t}function f(t){if(!i(t)){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push([e,t[e]]);t=n}return t}function p(t,e){return t[0].getTime()-e[0].getTime()}function M(t,e){return t-e}function m(){!Q&&"Highcharts"in g&&(Q=new function(){var d=g.Highcharts,a={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!(this.name="highcharts")},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},h=x(a,function(t){t.legend.enabled=!1},function(t,e){t.yAxis.min=e},function(t,e){t.yAxis.max=e},function(t,e){t.plotOptions.series.stacking=e?"normal":null},function(t,e){t.xAxis.title.text=e},function(t,e){t.yAxis.title.text=e});this.renderLineChart=function(t,e){var n={};"areaspline"===(e=e||"spline")&&(n={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var a,i,r,o=h(t.data,t.options,n);o.xAxis.type=t.options.discrete?"category":"datetime",o.chart.type=e,o.chart.renderTo=t.element.id;var s=t.data;for(i=0;i<s.length;i++){if(a=s[i].data,!t.options.discrete)for(r=0;r<a.length;r++)a[r][0]=a[r][0].getTime();s[i].marker={symbol:"circle"}}o.series=s,new d.Chart(o)},this.renderScatterChart=function(t){var e={},n=h(t.data,t.options,e);n.chart.type="scatter",n.chart.renderTo=t.element.id,n.series=t.data,new d.Chart(n)},this.renderPieChart=function(t){var e={};t.options.colors&&(e.colors=t.options.colors);var n=I(I(a,e),t.options.library||{});n.chart.renderTo=t.element.id,n.series=[{type:"pie",name:t.options.label||"Value",data:t.data}],new d.Chart(n)},this.renderColumnChart=function(t,e){e=e||"column";var n,a,i,r,o=t.data,s=h(o,t.options),c=[];for(s.chart.type=e,s.chart.renderTo=t.element.id,n=0;n<o.length;n++)for(i=o[n],a=0;a<i.data.length;a++)c[(r=i.data[a])[0]]||(c[r[0]]=new Array(o.length)),c[r[0]][n]=r[1];var l=[];for(n in c)c.hasOwnProperty(n)&&l.push(n);s.xAxis.categories=l;var u=[];for(n=0;n<o.length;n++){for(r=[],a=0;a<l.length;a++)r.push(c[l[a]][n]||0);u.push({name:o[n].name,data:r})}s.series=u,new d.Chart(s)};var e=this;this.renderBarChart=function(t){e.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){e.renderLineChart(t,"areaspline")}},K.push(Q)),!Z&&g.google&&g.google.setOnLoadCallback&&(Z=new function(){var h=g.google;this.name="google";var a={},i=[],r=function(){for(var t,e=0;e<i.length;e++)t=i[e],h.visualization&&("corechart"===t.pack&&h.visualization.LineChart||"timeline"===t.pack&&h.visualization.Timeline)&&(t.callback(),i.splice(e,1),e--)},t=function(t,e){if(e||(e=t,t="corechart"),i.push({pack:t,callback:e}),a[t])r();else{a[t]=!0;var n={packages:[t],callback:r};J.language&&(n.language=J.language),h.load("visualization","1",n)}},o={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},s=function(t){t.legend.position="none"},c=function(t,e){t.hAxis.viewWindow.min=e},l=function(t,e){t.hAxis.viewWindow.max=e},u=function(t,e){t.isStacked=!!e},d=x(o,s,function(t,e){t.vAxis.viewWindow.min=e},function(t,e){t.vAxis.viewWindow.max=e},u,function(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1},function(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}),f=function(t,e){var n,a,i,r,o,s=[];for(n=0;n<t.length;n++)for(i=t[n],a=0;a<i.data.length;a++)r=i.data[a],s[o="datetime"===e?r[0].getTime():r[0]]||(s[o]=new Array(t.length)),s[o][n]=F(r[1]);var c,l=[],u=!0;for(n in s)s.hasOwnProperty(n)&&("datetime"===e?(c=new Date(F(n)),u=u&&N(c)):c="number"===e?F(n):n,l.push([c].concat(s[n])));"datetime"===e&&l.sort(p);var d=new h.visualization.DataTable;for(e="datetime"===e&&u?"date":e,d.addColumn(e,""),n=0;n<t.length;n++)d.addColumn("number",t[n].name);return d.addRows(l),d},m=function(t){g.attachEvent?g.attachEvent("onresize",t):g.addEventListener&&g.addEventListener("resize",t,!0),t()};this.renderLineChart=function(n){t(function(){var t=d(n.data,n.options),e=f(n.data,n.options.discrete?"string":"datetime");n.chart=new h.visualization.LineChart(n.element),m(function(){n.chart.draw(e,t)})})},this.renderPieChart=function(a){t(function(){var t={chartArea:{top:"10%",height:"80%"}};a.options.colors&&(t.colors=a.options.colors);var e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn("string",""),n.addColumn("number","Value"),n.addRows(a.data),a.chart=new h.visualization.PieChart(a.element),m(function(){a.chart.draw(n,e)})})},this.renderColumnChart=function(n){t(function(){var t=d(n.data,n.options),e=f(n.data,"string");n.chart=new h.visualization.ColumnChart(n.element),m(function(){n.chart.draw(e,t)})})},this.renderBarChart=function(a){t(function(){var t={hAxis:{gridlines:{color:"#ccc"}}},e=x(o,s,c,l,u)(a.data,a.options,t),n=f(a.data,"string");a.chart=new h.visualization.BarChart(a.element),m(function(){a.chart.draw(n,e)})})},this.renderAreaChart=function(a){t(function(){var t={isStacked:!0,pointSize:0,areaOpacity:.5},e=d(a.data,a.options,t),n=f(a.data,a.options.discrete?"string":"datetime");a.chart=new h.visualization.AreaChart(a.element),m(function(){a.chart.draw(n,e)})})},this.renderGeoChart=function(a){t(function(){var t={legend:"none",colorAxis:{colors:a.options.colors||["#f6c7b6","#ce502d"]}},e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn("string",""),n.addColumn("number",a.options.label||"Value"),n.addRows(a.data),a.chart=new h.visualization.GeoChart(a.element),m(function(){a.chart.draw(n,e)})})},this.renderScatterChart=function(a){t(function(){var t={},e=d(a.data,a.options,t),n=f(a.data,"number");a.chart=new h.visualization.ScatterChart(a.element),m(function(){a.chart.draw(n,e)})})},this.renderTimeline=function(a){t("timeline",function(){var t={legend:"none"};a.options.colors&&(t.colors=a.options.colors);var e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn({type:"string",id:"Name"}),n.addColumn({type:"date",id:"Start"}),n.addColumn({type:"date",id:"End"}),n.addRows(a.data),a.element.style.lineHeight="normal",a.chart=new h.visualization.Timeline(a.element),m(function(){a.chart.draw(n,e)})})}},K.push(Z)),!q&&"Chart"in g&&(q=new function(){var r=g.Chart,s={maintainAspectRatio:!(this.name="chartjs"),animation:!1},i={scales:{yAxes:[{ticks:{maxTicksLimit:4},scaleLabel:{fontSize:16,fontColor:"#333"}}],xAxes:[{gridLines:{drawOnChartArea:!1},scaleLabel:{fontSize:16,fontColor:"#333"},time:{},ticks:{}}]},legend:{}},O=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],o=function(t){t.legend.display=!1},t=function(t,e){null!==e&&(t.scales.yAxes[0].ticks.min=e)},e=function(t,e){t.scales.yAxes[0].ticks.max=e},c=function(t,e){null!==e&&(t.scales.xAxes[0].ticks.min=e)},l=function(t,e){t.scales.xAxes[0].ticks.max=e},u=function(t,e){t.scales.xAxes[0].stacked=!!e,t.scales.yAxes[0].stacked=!!e},n=function(t,e){t.scales.xAxes[0].scaleLabel.display=!0,t.scales.xAxes[0].scaleLabel.labelString=e},a=function(t,e){t.scales.yAxes[0].scaleLabel.display=!0,t.scales.yAxes[0].scaleLabel.labelString=e},d=function(t,e,n,a){t.element.innerHTML="<canvas></canvas>";var i=t.element.getElementsByTagName("CANVAS")[0];t.chart=new r(i,{type:e,data:n,options:a})},B=function(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+e+")":t},h=function(t,e,n){var a=Math.ceil(t.element.offsetWidth/4/e.labels.length);n.scales.xAxes[0].ticks.callback=function(t){return(t=v(t)).length>a?t.substring(0,a-2)+"...":t}},f=x(I(s,i),o,t,e,u,n,a),m=function(t,e,n){var a,i,r,o,s,c,l=[],u=[],d=t.options.colors||O,h=!0,f=!0,m=!0,p=!0,g=!0,x=!0,v=("line"===n||"area"===n)&&!t.options.discrete,C=t.data,y=[],A=[];for(i=0;i<C.length;i++)for(o=C[i],r=0;r<o.data.length;r++)s=o.data[r],A[c=v?s[0].getTime():s[0]]||(A[c]=new Array(C.length)),A[c][i]=F(s[1]),-1===y.indexOf(c)&&y.push(c);v&&y.sort(M);var b,w,S=[];for(r=0;r<C.length;r++)S.push([]);for(w=0;w<y.length;w++)for(i=y[w],v?(b=new Date(F(i)),h=h&&N(b),a||(a=b.getDay()),f=f&&H(b,a),m=m&&V(b),p=p&&G(b),g=g&&P(b),x=x&&W(b)):b=i,u.push(b),r=0;r<C.length;r++)S[r].push(A[i][r]);for(i=0;i<C.length;i++){o=C[i];var T="line"!==n?B(d[i],.5):d[i],k={label:o.name,data:S[i],fill:"area"===n,borderColor:d[i],backgroundColor:T,pointBackgroundColor:d[i],borderWidth:2};l.push(I(k,o.library||{}))}if(v&&0<u.length){var z=u[0].getTime(),L=u[0].getTime();for(i=1;i<u.length;i++)(b=u[i].getTime())<z&&(z=b),L<b&&(L=b);var D,j=(L-z)/864e5;if(!e.scales.xAxes[0].time.unit)if(p||3650<j?(e.scales.xAxes[0].time.unit="year",D=365):m||300<j?(e.scales.xAxes[0].time.unit="month",D=30):h||10<j?(e.scales.xAxes[0].time.unit="day",D=1):g?(e.scales.xAxes[0].time.unit="hour",D=1/24):x&&(e.scales.xAxes[0].time.displayFormats={minute:"h:mm a"},e.scales.xAxes[0].time.unit="minute",D=1/24/60),D&&0<j){var E=Math.ceil(j/D/(t.element.offsetWidth/100));f&&(E=7*Math.ceil(E/7)),e.scales.xAxes[0].time.unitStepSize=E}e.scales.xAxes[0].time.tooltipFormat||(h?e.scales.xAxes[0].time.tooltipFormat="ll":g?e.scales.xAxes[0].time.tooltipFormat="MMM D, h a":x&&(e.scales.xAxes[0].time.tooltipFormat="h:mm a"))}return{labels:u,datasets:l}};this.renderLineChart=function(t,e){var n={};!t.options.max&&y(t.data)&&(t.options.max=1);var a=f(t.data,I(n,t.options)),i=m(t,a,e||"line");a.scales.xAxes[0].type=t.options.discrete?"category":"time",d(t,"line",i,a)},this.renderPieChart=function(t){for(var e=I(s,t.options.library||{}),n=[],a=[],i=0;i<t.data.length;i++){var r=t.data[i];n.push(r[0]),a.push(r[1])}var o={labels:n,datasets:[{data:a,backgroundColor:t.options.colors||O}]};d(t,"pie",o,e)},this.renderColumnChart=function(t,e){var n;n="bar"===e?x(I(s,i),o,c,l,u)(t.data,t.options):f(t.data,t.options);var a=m(t,n,"column");h(t,a,n),d(t,"bar"===e?"horizontalBar":"bar",a,n)};var p=this;this.renderAreaChart=function(t){p.renderLineChart(t,"area")},this.renderBarChart=function(t){p.renderColumnChart(t,"bar")}},K.unshift(q))}function e(t,e){var n,a,i,r;for(i="render"+t,r=e.options.adapter,m(),n=0;n<K.length;n++)if(a=K[n],(!r||r===a.name)&&o(a[i]))return a[i](e);throw new Error("No adapter found")}function W(t){return 0===t.getMilliseconds()&&0===t.getSeconds()}function P(t){return W(t)&&0===t.getMinutes()}function N(t){return P(t)&&0===t.getHours()}function H(t,e){return N(t)&&t.getDay()===e}function V(t){return N(t)&&1===t.getDate()}function G(t){return V(t)&&0===t.getMonth()}function C(t){return!isNaN(h(t))&&6<=v(t).length}function y(t){var e,n,a;for(e=0;e<t.length;e++)for(a=t[e].data,n=0;n<a.length;n++)if(0!=a[n][1])return!1;return!0}function A(t){var e,n,a;for(e=0;e<t.length;e++)for(a=f(t[e].data),n=0;n<a.length;n++)if(!C(a[n][0]))return!0;return!1}function b(t,e,n){var a;for(!i(t)||"object"!=typeof t[0]||i(t[0])?(t=[{name:e.label||"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,null!==e.discrete&&e.discrete!==undefined||(e.discrete=A(t)),e.discrete&&(n="string"),a=0;a<t.length;a++)t[a].data=_(f(t[a].data),n);return t}function w(t){var e,n=f(t);for(e=0;e<n.length;e++)n[e]=[v(n[e][0]),F(n[e][1])];return n}function S(t){var e;for(e=0;e<t.length;e++)t[e][1]=h(t[e][1]),t[e][2]=h(t[e][2]);return t}function T(t){t.data=b(t.data,t.options,"datetime"),e("LineChart",t)}function k(t){t.data=b(t.data,t.options,"string"),e("ColumnChart",t)}function z(t){t.data=w(t.data),e("PieChart",t)}function L(t){t.data=b(t.data,t.options,"string"),e("BarChart",t)}function D(t){t.data=b(t.data,t.options,"datetime"),e("AreaChart",t)}function j(t){t.data=w(t.data),e("GeoChart",t)}function E(t){t.data=b(t.data,t.options,"number"),e("ScatterChart",t)}function O(t){t.data=S(t.data),e("Timeline",t)}function B(t,e,n,a,i){"string"==typeof e&&(e=document.getElementById(e)),t.element=e,t.options=a||{},t.dataSource=n,t.getElement=function(){return e},t.getData=function(){return t.data},t.getOptions=function(){return a||{}},t.getChartObject=function(){return t.chart},u(R.charts[e.id]=t,i)}var R,$,U,Z,Q,q,J=g.Chartkick||{},K=[],X=/^(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)$/i;$=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,U=String(1.5).charAt(1);var Y=function(t,e){return t="number"===e?F(t):"datetime"===e?h(t):v(t)},_=function(t,e){var n,a,i=[];for(a=0;a<t.length;a++)n=Y(t[a][0],e),i.push([n,F(t[a][1])]);return"datetime"===e&&i.sort(p),i};R={LineChart:function(t,e,n){B(this,t,e,n,T)},PieChart:function(t,e,n){B(this,t,e,n,z)},ColumnChart:function(t,e,n){B(this,t,e,n,k)},BarChart:function(t,e,n){B(this,t,e,n,L)},AreaChart:function(t,e,n){B(this,t,e,n,D)},GeoChart:function(t,e,n){B(this,t,e,n,j)},ScatterChart:function(t,e,n){B(this,t,e,n,E)},Timeline:function(t,e,n){B(this,t,e,n,O)},charts:{}},"object"==typeof module&&"object"==typeof module.exports?module.exports=R:g.Chartkick=R}(window);